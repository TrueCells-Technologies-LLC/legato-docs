<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Legato: Modem Radio Control API</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo">
    <img alt="Logo" src="legatoLogo.png"/>
    <div id="projectbrief">Wireless M2M smooth and connected</div>
  </td>
  
  
   
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('c_mrc.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Modem Radio Control API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="le__mrc_8h.html">Click here for the API reference documentation.</a></p>
<hr/>
<p>This file contains the the prototype definitions of the high level Modem Radio Control (MRC) APIs.</p>
<p><a class="el" href="c_mrc.html#le_mrc_power">Radio Power Management</a> <br/>
 <a class="el" href="c_mrc.html#le_mrc_registration">Network Registration</a> <br/>
 <a class="el" href="c_mrc.html#le_mrc_signal">Signal Quality</a> <br/>
 <a class="el" href="c_mrc.html#le_mrc_network_information">Home Network Information</a> <br/>
 <a class="el" href="c_mrc.html#le_mrc_networkScan">Network Scan</a> <br/>
 <a class="el" href="c_mrc.html#le_mrc_configdb">Configuration tree</a> <br/>
</p>
<p>It's important for many M2M apps to know details about cellular network environments (like network registration and signal quality). It allows you to limit some M2M services based on the reliability of the network environment, and provides information to control power consumption (power on or shutdown the radio module).</p>
<h2><a class="anchor" id="le_mrc_power"></a>
Radio Power Management</h2>
<p><code><a class="el" href="le__mrc_8h.html#a78bd27d92337e2122320f41bcaa5480f">le_mrc_SetRadioPower()</a></code> API allows the application to power up or shutdown the radio module.</p>
<p><code><a class="el" href="le__mrc_8h.html#aac51332c6c84e460746eb1ad45c064d6">le_mrc_GetRadioPower()</a></code> API displays radio module power state.</p>
<h2><a class="anchor" id="le_mrc_registration"></a>
Network Registration</h2>
<p><code><a class="el" href="le__mrc_8h.html#a4f11e27862fef384c0023f5b538e543d">le_mrc_GetNetRegState()</a></code> API retrieves the radio module network registration status.</p>
<p>The application can register a handler function to retrieve the registration status each time the registration state changes.</p>
<p><code><a class="el" href="le__mrc_8h.html#ace1cd9a07ba4048b68911097bae579d4">le_mrc_AddNetRegStateHandler()</a></code> API installs a registration state handler.</p>
<p><code><a class="el" href="le__mrc_8h.html#ac48c2d083b4b1fe59dffbba1d75e426e">le_mrc_RemoveNetRegStateHandler()</a></code> API uninstalls the handler function. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>If only one handler is registered, the <a class="el" href="le__mrc_8h.html#ac48c2d083b4b1fe59dffbba1d75e426e">le_mrc_RemoveNetRegStateHandler()</a> API resets the registration mode to its original value before any handler functions were added.</dd></dl>
<p><code><a class="el" href="le__mrc_8h.html#a9e54b1efaecacc2a4006fa97e0abcc6a">le_mrc_ConnectCellularNetwork()</a></code> API connects to one network.</p>
<h2><a class="anchor" id="le_mrc_signal"></a>
Signal Quality</h2>
<p><code><a class="el" href="le__mrc_8h.html#a717aa0f4e4dc9a83b6adc2f26f3f0258">le_mrc_GetSignalQual()</a></code> retrieves the received signal strength details.</p>
<h2><a class="anchor" id="le_mrc_network_information"></a>
Home Network Information</h2>
<p><code><a class="el" href="le__mrc_8h.html#adb0f8482f975f23c574594f7e6c1c4df">le_mrc_GetHomeNetworkName()</a></code> retrieves the Home Network Name. This value can be empty even if connected to a GSM network. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Maybe need to provide an API to get 'Mobile country code' and 'Mobile Network Code'.</dd></dl>
<h2><a class="anchor" id="le_mrc_networkScan"></a>
Network Scan</h2>
<p>Call <code><a class="el" href="le__mrc_8h.html#aeeca2f873b7830d9b069dce692e99abe">le_mrc_PerformCellularNetworkScan()</a></code> to fill a list of all network in sight. You can go through all Scan Information by calling <code><a class="el" href="le__mrc_8h.html#a0852cae99a555d7cf84fa037ca10cb99">le_mrc_GetFirstCellularNetworkScan()</a></code> and <code><a class="el" href="le__mrc_8h.html#a75b4a316e87b15ac7558043a5e2080f9">le_mrc_GetNextCellularNetworkScan()</a></code>.</p>
<p>For each Scan Information, you can call:</p>
<ul>
<li><code><a class="el" href="le__mrc_8h.html#a54c3ddcd6c877b48c612aee65a82b5fd">le_mrc_GetCellularNetworkMccMnc()</a></code> to have the operator code.</li>
<li><code><a class="el" href="le__mrc_8h.html#a2a52836260653cc51f95b592d0ad1b5f">le_mrc_GetCellularNetworkName()</a></code> to get the operator name.</li>
<li><code><a class="el" href="le__mrc_8h.html#a7dd469abba42286dbe675e0dc23b4460">le_mrc_IsCellularNetworkRatAvailable()</a></code> to check is this is the radio access technology.</li>
<li><code><a class="el" href="le__mrc_8h.html#aee8a43ae54b3598fccdcfb8f4b12ad57">le_mrc_IsCellularNetworkInUse()</a></code> to check if this is currently in use by the network.</li>
<li><code><a class="el" href="le__mrc_8h.html#a68f43831a24c0876f3369f8f04fecc3c">le_mrc_IsCellularNetworkAvailable()</a></code> to check if this is available.</li>
<li><code><a class="el" href="le__mrc_8h.html#a6bd66ede48ce256daa45318fe721194f">le_mrc_IsCellularNetworkHome()</a></code> to check if this is in home status.</li>
<li><code><a class="el" href="le__mrc_8h.html#a83c48b76855849170377097f0518e348">le_mrc_IsCellularNetworkForbidden()</a></code> to check if this is forbidden by the network.</li>
</ul>
<p><code><a class="el" href="le__mrc_8h.html#aabbed28955eab0ed5c942a2a037ed6cf">le_mrc_DeleteCellularNetworkScan()</a></code> should be called when you do not need the list anymore.</p>
<p>Usage example:</p>
<div class="fragment"><pre class="fragment">    <a class="code" href="le__mrc_8h.html#afdc0fa35977d599265ce70a1ade95666">le_mrc_ScanInformation_ListRef_t</a> scanInformationList = NULL;

    scanInformationList = <a class="code" href="le__mrc_8h.html#aeeca2f873b7830d9b069dce692e99abe">le_mrc_PerformCellularNetworkScan</a>(LE_MRC_RAT_ALL);

    <span class="keywordflow">if</span> (!scanInformationList)
    {
        fprintf(stdout, <span class="stringliteral">&quot;Could not perform scan\n&quot;</span>);
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="le__mrc_8h.html#a82364d092536d0a9677ff41bdf1c2c13">le_mrc_ScanInformation_Ref_t</a> cellRef;

    uint32_t i;
    <span class="keywordflow">for</span> (i=1;i&lt;<a class="code" href="le__mdm__defs_8h.html#aaf23906c37ad59fb96a8a48f7fab5b43aac032f28348a900d439ce496e20c586a" title="All technology.">LE_MRC_RAT_ALL</a>;i=i&lt;&lt;1)
    {

        <span class="keywordflow">for</span> (cellRef=<a class="code" href="le__mrc_8h.html#a0852cae99a555d7cf84fa037ca10cb99">le_mrc_GetFirstCellularNetworkScan</a>(scanInformationList);
             cellRef!=NULL;
             cellRef=<a class="code" href="le__mrc_8h.html#a75b4a316e87b15ac7558043a5e2080f9">le_mrc_GetNextCellularNetworkScan</a>(scanInformationList))
        {
            <span class="keywordtype">char</span> mcc[4],mnc[4];
            <span class="keywordtype">char</span> name[100];

            <span class="keywordflow">if</span> (<a class="code" href="le__mrc_8h.html#a7dd469abba42286dbe675e0dc23b4460">le_mrc_IsCellularNetworkRatAvailable</a>(cellRef,i)) {

                <span class="keywordflow">if</span> (<a class="code" href="le__mrc_8h.html#a54c3ddcd6c877b48c612aee65a82b5fd">le_mrc_GetCellularNetworkMccMnc</a>(cellRef,mcc,<span class="keyword">sizeof</span>(mcc),mnc,<span class="keyword">sizeof</span>(mnc))!=<a class="code" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86ca5066a4bcec691c6b67843b8f79656422" title="Successful.">LE_OK</a>)
                {
                    fprintf(stdout, <span class="stringliteral">&quot;Failed to get operator code.\n&quot;</span>);
                }
                <span class="keywordflow">else</span>
                {
                    fprintf(stdout, <span class="stringliteral">&quot;[%s-%s] &quot;</span>,mcc,mnc);
                }

                <span class="keywordflow">if</span> (<a class="code" href="le__mrc_8h.html#a2a52836260653cc51f95b592d0ad1b5f">le_mrc_GetCellularNetworkName</a>(cellRef, name, <span class="keyword">sizeof</span>(name)) != <a class="code" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86ca5066a4bcec691c6b67843b8f79656422" title="Successful.">LE_OK</a>)
                {
                    fprintf(stdout, <span class="stringliteral">&quot;Failed to get operator name.\n&quot;</span>);
                }
                <span class="keywordflow">else</span>
                {
                    fprintf(stdout, <span class="stringliteral">&quot;%-32s&quot;</span>,name);
                }

                fprintf(stdout,<span class="stringliteral">&quot;%-15s,&quot;</span>,<a class="code" href="le__mrc_8h.html#aee8a43ae54b3598fccdcfb8f4b12ad57">le_mrc_IsCellularNetworkInUse</a>(cellRef)?<span class="stringliteral">&quot;Is used&quot;</span>:<span class="stringliteral">&quot;Is not used&quot;</span>);

                fprintf(stdout,<span class="stringliteral">&quot;%-20s,&quot;</span>,<a class="code" href="le__mrc_8h.html#a68f43831a24c0876f3369f8f04fecc3c">le_mrc_IsCellularNetworkAvailable</a>(cellRef)?<span class="stringliteral">&quot;Is available&quot;</span>:<span class="stringliteral">&quot;Is not available&quot;</span>);

                fprintf(stdout,<span class="stringliteral">&quot;%-10s,&quot;</span>,<a class="code" href="le__mrc_8h.html#a6bd66ede48ce256daa45318fe721194f">le_mrc_IsCellularNetworkHome</a>(cellRef)?<span class="stringliteral">&quot;Home&quot;</span>:<span class="stringliteral">&quot;Roaming&quot;</span>);

                fprintf(stdout,<span class="stringliteral">&quot;%-10s]\n&quot;</span>,<a class="code" href="le__mrc_8h.html#a83c48b76855849170377097f0518e348">le_mrc_IsCellularNetworkForbidden</a>(cellRef)?<span class="stringliteral">&quot;Forbidden&quot;</span>:<span class="stringliteral">&quot;Allowed&quot;</span>);
            }
        }
    }

    <a class="code" href="le__mrc_8h.html#aabbed28955eab0ed5c942a2a037ed6cf">le_mrc_DeleteCellularNetworkScan</a>(scanInformationList);
</pre></div><h2><a class="anchor" id="le_mrc_configdb"></a>
Configuration tree</h2>
<p>The configuration database path for the MRC is: </p>
<div class="fragment"><pre class="fragment">
   /
       modemServices/
           radioControl/
               preferredList/
                   network-0/
                       mcc&lt;int&gt; = &lt;MCC_VALUE&gt;
                       mnc&lt;int&gt; = &lt;MNC_VALUE&gt;
                       rat/
                           rat-0&lt;string&gt; = &lt;RAT_VALUE&gt;
                           ...
                           rat-n&lt;string&gt; = &lt;RAT_VALUE&gt;
                   ...
                   network-n/
                       mcc&lt;int&gt; = &lt;MCC_VALUE&gt;
                       mnc&lt;int&gt; = &lt;MNC_VALUE&gt;
                       rat/
                           rat-0&lt;string&gt; = &lt;RAT_VALUE&gt;
                           ...
                           rat-n&lt;string&gt; = &lt;RAT_VALUE&gt;
               scanMode/
                   manual&lt;bool&gt;
                   mcc&lt;int&gt; = &lt;MCC_VALUE&gt;
                   mnc&lt;int&gt; = &lt;MNC_VALUE&gt;

  </pre></div><ul>
<li>MCC_VALUE is the Mobile Country Code</li>
<li>MNC_VALUE is the Mobile Network Code</li>
<li>RAT_VALUE is the Radio Access technology.Possible values are:<ul>
<li>"GSM"</li>
<li>"UTMS"</li>
<li>"LTE"</li>
<li>"GSM compact"</li>
</ul>
</li>
</ul>
<hr/>
<p>Copyright (C) Sierra Wireless, Inc. 2013. All rights reserved. Use of this work is subject to license. </p>
</div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
  <div id="nav-path" class="navpath">
    <ul>
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless 2014
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.7.6.1
        </div>
    </div>
</body>
</html>
