<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Legato: Definition Files</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <img alt="Logo" src="legatoLogo.png"/>
    <div id="projectbrief">Simplifying M2M development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('def_files.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Definition Files </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="defFilesOverview"></a>
Overview</h1>
<p>The system definition (<code>.sdef</code>) files, application definition (<code>.adef</code>) files, and component definition (<code>Component.cdef</code>) files are used as input to the <a class="el" href="build_tools.html">Build Tools</a> <code>mksys</code>, <code>mkapp</code>, <code>mkexe</code>, and <code>mkcomp</code> (known collectively as the "mk tools").</p>
<p>These definition files, together with <a class="el" href="language_independent_a_p_is.html">Language-Independent APIs</a>, make it easier to develop reusable, component-based software within the Legato framework, and allows a great deal of boiler-plate code to be automatically generated.</p>
<p>Interfaces are defined using <code>.api</code> files. Implementations of those interfaces are constructed as reusable components. Components can be combined into applications. Applications can be installed and run on target devices. Furthermore, applications can be integrated into systems of communicating applications that can be deployed together to target devices.</p>
<h2><a class="anchor" id="defFilesOverviewCdef"></a>
.cdef Files</h2>
<p>Component definition <code></code>.cdef files are used to define the external interfaces and internal content of reusable software components.</p>
<p>Each component has a single <code>Component.cdef</code> file, which defines</p>
<ul>
<li>what source code files are used to build the component</li>
<li>what files from the build system are to be included in any app that includes the component</li>
<li>what IPC interfaces the component exports or imports</li>
<li>memory pool sizes (future)</li>
<li>configuration settings for the component (future)</li>
</ul>
<h2><a class="anchor" id="defFilesOverviewAdef"></a>
.adef Files</h2>
<p>Application definition <code></code>.adef files are used to define the external interfaces and internal content of applications that can be built, installed, and run on target devices.</p>
<p><code>.adef</code> files can also be used to override some settings of components without having to change those components themselves, thereby making the components more reusable.</p>
<p>Each application has a <code>.adef</code> file, which defines</p>
<ul>
<li>what executables should be built from what components</li>
<li>what additional files from the build system are to be included in the app</li>
<li>what processes should be started (by running what executables with what command-line arguments and environment variables) when the app starts</li>
<li>whether the app should automatically start when the target device boots</li>
<li>whether the app should be run in a sandbox</li>
<li>what files (or other file system objects) from the target root file system are to be made available to the app at runtime</li>
<li>what limits should be placed on the app at runtime (such as cpu limits, memory limits, etc.)</li>
<li>overrides for memory pool sizes and configuration settings for components in the app (future)</li>
<li>IPC bindings between components within the app</li>
</ul>
<h2><a class="anchor" id="defFilesOverviewSdef"></a>
.sdef Files</h2>
<p>System definition <code></code>.sdef files are used to interconnect applications with each other and the targets runtime environment (e.g., hardware devices).</p>
<p>These files can also be used to override some settings of applications without having to change those applications themselves, thereby making the applications more reusable.</p>
<p>A <code>.sdef</code> file defines a system of one or more applications that can be deployed to target devices in the field. Each <code>.sdef</code> file lists</p>
<ul>
<li>what apps are to be installed on the device</li>
<li>what IPC connections are permitted between apps</li>
<li>overrides for limits, configuration settings, and IPC bindings within apps</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Support for <code></code>.sdef files is incomplete.</dd></dl>
<h1><a class="anchor" id="defFilesFormat"></a>
Common File Format</h1>
<p>All of the definition files have the same basic format.</p>
<p>They're divided into sections with content specific to each section.</p>
<p>A section always starts with a section name followed by a colon (':'). </p>
<pre class="fragment">sources:
    helloWorld.c
</pre><p>All sections are optional (they can be empty or omitted).</p>
<p>Sections can be in any order, multiple occurrences are permitted, and some sections have sub-sections.</p>
<p>Tabs, spaces, new-lines, and carriage-returns are all ignored (except that a newline terminates a C++ style comment), so the author's choice of indentation and spacing style is relatively unrestricted.</p>
<h2><a class="anchor" id="defFileFormatComments"></a>
Comments</h2>
<p>Comments can be included using </p>
<pre class="fragment"> // C++-style one-line comments.

 /* or
    C-style multi-line comments. */
</pre><h2><a class="anchor" id="defFileFormatSample"></a>
Sample</h2>
<pre class="fragment">/* Component.cdef file for a hypothetical web server component that provides a control API
 * (defined in httpdCtrl.api) that allows other apps to start and stop the web server via IPC.
 */

files:
    // Include all the web pages from the build host in the application, and have them appear
    // to the application under /var/www.

    htdocs   /var/www/

export :     // Note that space is allowed between the section name and the colon.

    httpdCtrl.api

sources:

    httpd.c
</pre><h1><a class="anchor" id="defFilesSearchPaths"></a>
Build Tool Search Paths</h1>
<p>Two are used:</p>
<ul>
<li><b>source</b> search path - lists file system directories where the build tools look for source code files and components.</li>
<li><b>interface</b> search path - lists file system directories where the build tools look for interface definition files (.h files and .api files).</li>
</ul>
<p>The default search path “.” is the current working directory where the build tool ran.</p>
<p>Search paths can be changed through mk tools command-line options:</p>
<ul>
<li>'-s' (or ‘-c’) sets the source search path</li>
<li>‘-i’ sets the interface search path</li>
</ul>
<pre class="fragment">$ mksys packageTracker.sdef -i ~/work/interfaces -s ~/work/components
</pre><h1><a class="anchor" id="defFilesOverriding"></a>
Precedence and Overriding</h1>
<p>Settings in a <code>.sdef</code> file override settings from <em>both</em> the <code>.adef</code> and <code>Component.cdef</code>, while the <code>.adef</code> overrides settings in the <code>Component.cdef</code>. This increases reusability by allowing an integrator to override a component's or app's settings without having to change that component or app.</p>
<p>Also, all configuration settings can be overridden on the target device at runtime (although, many will not take effect until the application is restarted).</p>
<h1><a class="anchor" id="defFilesUsingEnvVarsIn"></a>
Customizing Builds Using Environment Variables</h1>
<p>It is possible to use environment variables inside of <code>.sdef</code>, <code>.adef</code>, and <code>Component.cdef</code> files.</p>
<p>This is done in the same way as in shell scripts, by prefixing the environment variable name with a dollar sign ($).</p>
<pre class="fragment">import:
    $BUILD_ROOT/interfaces/httpdCtrl.api
</pre><p>Some useful environment variables:</p>
<ul>
<li><code>LEGATO_ROOT</code> = path to where the Legato framework sources are located</li>
<li><code>TARGET</code> = build target (e.g., ar7, wp7, localhost)</li>
<li><code>LEGATO_BUILD</code> = shorthand for <code>$LEGATO_ROOT/build/$TARGET</code></li>
</ul>
<h1><a class="anchor" id="defWhatsNext"></a>
What's Next?</h1>
<p><a class="el" href="def_files_adef.html">Application Definition (.adef) Files</a> <br/>
 <a class="el" href="def_files_cdef.html">Component Definition (.cdef) Files</a> <br/>
 <a class="el" href="def_files_sdef.html">System Definition (.sdef) Files</a></p>
<p>Or move to the <b>next level</b>:</p>
<p><a class="el" href="build_tools.html">Build Tools</a> <br/>
 <a class="el" href="demo_apps.html">Demo Applications</a></p>
<hr/>
<p>Copyright (C) Sierra Wireless, Inc. 2014. All rights reserved. Use of this work is subject to license. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless 2014
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.6
        </div>
    </div>
</body>
</html>
